<canvas title="Test best positions" width="800" height="600">
  <include href="debugging.lzx"/>
  <include href="osutils.lzx"/>

  <view id="neighbor" width="200" height="300" bgcolor="green"
        opacity=".5"
         onmousedown="Dragger.start(this); dragState.apply()"
         onmouseup="Dragger.stop(this); dragState.remove()">
    <state name="dragState">
      <attribute name="_" value="${f(Dragger.handleMouseMove(this,
                                 canvas.getMouse('x'),
                                 canvas.getMouse('y')))}"/>
    </state>
    <view name="resizeHandle" width="20" height="20" align="right" valign="bottom" bgcolor="black"/>
  </view>

  <view id="refContainer">
    <view width="100%" height="100%" bgcolor="blue" opacity=".1"/>
    <view id="ref" width="100" height="200" bgcolor="blue"
          onmousedown="Dragger.start(this); dragState.apply()"
          onmouseup="Dragger.stop(this); dragState.remove()">
      <state name="dragState">
        <attribute name="_" value="${f(Dragger.handleMouseMove(this,
                                   canvas.getMouse('x'),
                                   canvas.getMouse('y')))}"/>
      </state>
      <view name="resizeHandle" width="20" height="20" align="right" valign="bottom" bgcolor="black"/>
    </view>
  </view>

  <script>
    refContainer.set({x: 0, y: 10, width: 704, height: 565});
    //ref.set({x: 326, y: -115, width: 208.421052631579, height: 528});
    ref.set({y: 313.95, x: 357, height: 528, width: 208.421052631579});
    //ref.makeDraggable();
    function f() {
      var pos = findBestRelativePosition(neighbor, ref, refContainer, 10);
      neighbor.set({x: pos.x, y: pos.y});
      //if (arguments.length) info(pos);
    }
    f();
  </script>
</canvas>